import{_ as s,c as a,o,N as n}from"./chunks/framework.23a4abfb.js";const e="/proven-pinia-patterns/assets/options-vs-setup.920dee94.jpg",A=JSON.parse('{"title":"Options vs Setup Stores","description":"","frontmatter":{},"headers":[],"relativePath":"options-vs-setup.md"}'),l={name:"options-vs-setup.md"},p=n(`<h1 id="options-vs-setup-stores" tabindex="-1">Options vs Setup Stores <a class="header-anchor" href="#options-vs-setup-stores" aria-label="Permalink to &quot;Options vs Setup Stores&quot;">‚Äã</a></h1><blockquote><p>Con Pinia, hay dos formas diferentes de definir un <em>store</em>. Estos dos tipos de <em>store</em> se conocen como <a href="https://pinia.vuejs.org/core-concepts/#option-stores" target="_blank" rel="noreferrer">Options Store</a> y <a href="https://pinia.vuejs.org/core-concepts/#setup-stores" target="_blank" rel="noreferrer">Setup Store</a>. Puedes elegir qu√© tipo de <em>store</em> quieres usar. Ambos hacen b√°sicamente lo mismo; la elecci√≥n que haga depender√° de su propia preferencia personal o de su experiencia anterior con el uso de las diferentes API de Vue.</p></blockquote><p>Primero, repasemos c√≥mo definimos un <em>store</em> con Pinia.</p><h2 id="definicion-de-un-store-pinia" tabindex="-1">Definici√≥n de un <em>Store</em> Pinia <a class="header-anchor" href="#definicion-de-un-store-pinia" aria-label="Permalink to &quot;Definici√≥n de un _Store_ Pinia&quot;">‚Äã</a></h2><p>Cada vez que queramos crear un <em>store</em>, ya sea un <em>options store</em> o un <em>setup store</em>, debemos importar <code>defineStore</code> desde Pinia. Luego pasamos un <em>string</em> para el nombre del <em>store</em> como primer par√°metro.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useAuthStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">auth</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;"> )</span></span></code></pre></div><blockquote><p>Este <em>string</em> es como una identificaci√≥n: debe ser √∫nico porque as√≠ es como Pinia rastrea el estado de cada <em>store</em> individual. Es el nombre del <em>store</em> que ver√° en <strong>devtools</strong> para ese <em>store</em> en particular.</p></blockquote><p>Cuando creamos una identificaci√≥n (o nombre) de <em>store</em>, eso crea una propiedad en el objeto de estado de la instancia de Pinia, y ah√≠ es donde <strong>devtools</strong> busca los nombres de los <em>stores</em> para mostrarnos.</p><h2 id="options-stores" tabindex="-1">Options Stores <a class="header-anchor" href="#options-stores" aria-label="Permalink to &quot;Options Stores&quot;">‚Äã</a></h2><p>Si ha visto algunos otros cursos sobre Pinia, ya habr√° aprendido a crear una Options Stores.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//Options Store</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useTodoStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ToDoStore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">todos</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> []</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">actions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">addTodo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getters</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">doneTodos</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> todo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">done) </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>Lo que hace que esto sea un Options Stores es el segundo par√°metro que pasamos a la funci√≥n <code>defineStore</code>: es un objeto de opciones.</p><p>Esta sintaxis se sentir√° similar a la Options API de Vue si la ha usado antes, especialmente los datos, m√©todos y propiedades calculadas de la Options API.</p><blockquote><p>En un tienda de opciones, el estado corresponde a los datos, las acciones a los m√©todos y los captadores a los computados.</p></blockquote><h2 id="setup-stores" tabindex="-1">Setup Stores <a class="header-anchor" href="#setup-stores" aria-label="Permalink to &quot;Setup Stores&quot;">‚Äã</a></h2><blockquote><p>Entonces, las Options Stores se sienten similares a la forma de hacer las cosas de la Options API... pero ¬øeso significa que las Setup Stores se sienten similares a la forma de hacer las cosas de Vue 3 Composition?</p></blockquote><p>¬°S√≠! Si ha estado usando la Composition API de Vue 3, una Setup Stores le resultar√° mucho m√°s familiar.</p><p>En una Setup Stores, el segundo par√°metro que pasamos a <code>defineStore</code> es una funci√≥n:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Setup Store</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">computed</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useTodoStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ToDoStore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todos</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#F07178;">([])</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">addTodo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">doneTodos</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">computed</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">done</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">addTodo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">doneTodos</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>Al igual que la funci√≥n <strong>setup</strong> en la Composition API, podemos crear un estado reactivo usando <code>refs</code> o <code>reactivo</code>. Nuestras acciones que pueden cambiar de estado se escribir√°n como funciones. Y podemos crear <code>getters</code> usando el ayudante <code>computed</code> de Vue.</p><blockquote><p>Cualquier propiedad de estado, funci√≥n o propiedad calculada debe devolverse en un objeto.</p></blockquote><p>Esto es similar a la forma en que funciona la funci√≥n <strong>setup</strong> en la Composition API, si est√° utilizando la sintaxis tradicional.</p><p>Muchas personas optan por utilizar una sintaxis abreviada denominada <strong>Script Setup API</strong> en sus archivos de componentes de Vue 3, y ver√° que se utiliza en el proyecto de ejemplo de este tutorial (el proyecto Pinia Restaurants).</p><p>Sin embargo, las <strong>stores</strong> de Pinia son archivos de JavaScript similares a los composables de Vue 3 y no pueden usar la sintaxis simplificada de <strong>script setup</strong>. Solo los archivos Vue pueden.</p><blockquote><p>Tenemos que usar la sintaxis <strong>setup</strong> tradicional, por lo que devolvemos propiedades y acciones de estado en el objeto devuelto si queremos que est√©n disponibles para otros archivos de Vue y las <strong>devtools</strong>.</p></blockquote><h2 id="¬øcual-usar-options-o-setup-store" tabindex="-1">¬øCu√°l usar: Options o Setup store? <a class="header-anchor" href="#¬øcual-usar-options-o-setup-store" aria-label="Permalink to &quot;¬øCu√°l usar: Options o Setup store?&quot;">‚Äã</a></h2><blockquote><p>En √∫ltima instancia, la elecci√≥n de utilizar una Options Store o una Setup Store depende de las preferencias y demandas de usted o de su equipo. Sin embargo, hay varias ventajas de usar una Setup Store.</p></blockquote><p>Las Setup Store nos permiten aprovechar la API de reactividad de Vue 3. Podemos usar composables, como funciones de composici√≥n de terceros de la biblioteca <a href="https://vueuse.org/" target="_blank" rel="noreferrer">VueUse</a>, y podemos usar <a href="https://vuejs.org/guide/essentials/watchers.html" target="_blank" rel="noreferrer">watchers</a>.</p><p>Veamos una caracter√≠stica de nuestra aplicaci√≥n de ejemplo, Restaurantes Pinia, donde podemos usar un <code>watcher</code>.</p><p>Cuando el usuario carga la p√°gina, hay una entrada para escribir su ciudad.</p><p>Pero si el usuario no escribe nada, su ubicaci√≥n actual se encontrar√° autom√°ticamente. As√≠ que puedan usar la ubicaci√≥n que se carga para ellos, o pueden ingresar una nueva ubicaci√≥n.</p><p><img src="`+e+`" alt="options-vs-setup"></p><p>La funci√≥n que carga su ubicaci√≥n autom√°ticamente se basa en el componente <a href="https://vueuse.org/core/useGeolocation/" target="_blank" rel="noreferrer"><code>useGeolocation</code> de VueUse</a>.</p><p>Podemos traer ese composable al <code>store</code> de geolocalizaci√≥n import√°ndolo desde la biblioteca VueUse. Y luego debemos usar el composable dentro de la funci√≥n <code>setup</code> para que Vue pueda hacer su magia para realizar un seguimiento de los efectos de reactividad relacionados con este composable.</p><p><code>üìÑ src/stores/geolocation.js</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">watch</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useGeolocation</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@vueuse/core</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useGeoLocationStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">geolocation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useGeolocation</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// watch for coordinates to load or update, get a new location</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">watch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newValue</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">getLocation</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">longitude</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getLocation</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">longitude</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// fetch location data from Google Maps API</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">getLocation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>La acci√≥n <code>getLocation</code> buscar√° una ubicaci√≥n mediante la API de <strong>Google Maps</strong>. Nos dar√° la ciudad si le enviamos coordenadas. Necesitaremos la latitud y la longitud del usuario para hacer esto, lo cual puede hacer por nosotros el composable <code>useGeolocation</code> de VueUse.</p><p>Sin embargo, dado que el composable <code>useGeolocation</code> debe solicitar permiso para obtener la ubicaci√≥n del usuario y hay un poco de retraso para que se carguen las coordenadas de la ubicaci√≥n, significa que no podemos activar la acci√≥n instant√°neamente cuando el componente se monta por primera vez. Necesitamos activarlo despu√©s de que se hayan cargado las coordenadas.</p><p>Aqu√≠ es donde entra en juego el <code>watcher</code>. Podemos observar el valor de las coordenadas y, cuando ese valor llegue, desencadenar la acci√≥n <code>getLocation</code>.</p><h2 id="no-es-un-factor-decisivo" tabindex="-1">No es un factor decisivo <a class="header-anchor" href="#no-es-un-factor-decisivo" aria-label="Permalink to &quot;No es un factor decisivo&quot;">‚Äã</a></h2><p>Si bien poder usar <strong>watchers</strong> es definitivamente una ventaja de los <strong>stores</strong> de <strong>setup</strong>, no es un factor decisivo para los <strong>stores</strong> de <strong>Options</strong>. Hay formas de evitar tener que escribir este <strong>watcher</strong> en el <strong>store</strong>.</p><p>Por ejemplo, podr√≠amos usar el componente <code>useGeolocation</code> en un componente y ver los valores all√≠, luego desencadenar la acci√≥n en el <strong>store</strong> desde el componente.</p><p>Sin embargo, si se siente c√≥modo con la <strong>Composition API</strong> y un <strong>watcher</strong> es una buena opci√≥n para su soluci√≥n, entonces los <strong>stores</strong> de <strong>setup</strong> son el camino a seguir. Pero si no usa la <strong>Composition API</strong> o si es relativamente nuevo en Pinia, es mejor que se quede con el <strong>store</strong> de <strong>Options</strong>. Elija el tipo de <strong>store</strong> que le parezca adecuado para usted y sus casos de uso.</p><h2 id="proximamente-tiendas-modulares" tabindex="-1">Pr√≥ximamente: tiendas modulares <a class="header-anchor" href="#proximamente-tiendas-modulares" aria-label="Permalink to &quot;Pr√≥ximamente: tiendas modulares&quot;">‚Äã</a></h2><p>En la pr√≥xima lecci√≥n, aprenderemos c√≥mo Pinia ayuda a mantener las aplicaciones m√°s organizadas con sus <strong>stores</strong> modulares. Es el primer paso para usar Pinia, dise√±ando una aplicaci√≥n que sea m√°s f√°cil de entender para los miembros del equipo debido a su organizaci√≥n en torno a √°reas de inter√©s separadas.</p>`,45),t=[p];function r(c,i,y,D,F,d){return o(),a("div",null,t)}const C=s(l,[["render",r]]);export{A as __pageData,C as default};
