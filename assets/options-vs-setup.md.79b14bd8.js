import{_ as s,c as a,o,N as n}from"./chunks/framework.23a4abfb.js";const e="/proven-pinia-patterns/assets/options-vs-setup.920dee94.jpg",A=JSON.parse('{"title":"Options vs Setup Stores","description":"","frontmatter":{},"headers":[],"relativePath":"options-vs-setup.md"}'),l={name:"options-vs-setup.md"},p=n(`<h1 id="options-vs-setup-stores" tabindex="-1">Options vs Setup Stores <a class="header-anchor" href="#options-vs-setup-stores" aria-label="Permalink to &quot;Options vs Setup Stores&quot;">‚Äã</a></h1><blockquote><p>Con Pinia, hay dos formas diferentes de definir un tienda. Estos dos tipos de <em>store</em> se conocen como <a href="https://pinia.vuejs.org/core-concepts/#option-stores" target="_blank" rel="noreferrer">Option Stores</a> y <a href="https://pinia.vuejs.org/core-concepts/#setup-stores" target="_blank" rel="noreferrer">Setup Stores</a>. Puedes elegir qu√© tipo de tienda quieres usar. Ambas hacen b√°sicamente lo mismo; la elecci√≥n que haga depender√° de su propia preferencia personal o de su experiencia anterior con el uso de las diferentes API de Vue.</p></blockquote><p>Primero, repasemos c√≥mo definimos una tienda con Pinia.</p><h2 id="definicion-de-una-tienda-pinia" tabindex="-1">Definici√≥n de una tienda Pinia <a class="header-anchor" href="#definicion-de-una-tienda-pinia" aria-label="Permalink to &quot;Definici√≥n de una tienda Pinia&quot;">‚Äã</a></h2><p>Cada vez que queramos crear una tienda, ya sea un <strong>options store</strong> o un <strong>setup store</strong>, debemos importar <code>defineStore</code> desde Pinia. Luego pasamos un <code>string</code> para el nombre de la tienda como primer par√°metro.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useAuthStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">auth</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/*...*/</span><span style="color:#A6ACCD;"> )</span></span></code></pre></div><blockquote><p>Este <code>string</code> es como una identificaci√≥n: debe ser √∫nico porque as√≠ es como Pinia rastrea el estado de cada tienda individual. Es el nombre de la tienda que ver√° en las <strong>devtools</strong> para esa tienda en particular.</p></blockquote><p>Cuando creamos una identificaci√≥n (o nombre) de tienda, eso crea una propiedad en el objeto del estado de la instancia de Pinia, y ah√≠ es donde las <strong>devtools</strong> busca los nombres de las tiendas para mostrarnos.</p><h2 id="options-store" tabindex="-1">Options Store <a class="header-anchor" href="#options-store" aria-label="Permalink to &quot;Options Store&quot;">‚Äã</a></h2><p>Si ha visto algunos otros cursos sobre Pinia, ya habr√° aprendido a crear una <strong>Options Store</strong>.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//Options Store</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useTodoStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ToDoStore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">todos</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> []</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">actions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">addTodo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getters</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">doneTodos</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> todo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">done) </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><blockquote><p>Lo que hace que esto sea un <strong>Options Store</strong> es el segundo par√°metro que pasamos a la funci√≥n <code>defineStore</code>: <em>es un objeto de opciones</em>.</p></blockquote><p>Esta sintaxis se sentir√° similar a la <strong>Options API</strong> de Vue si la ha usado antes, especialmente los datos, m√©todos y propiedades calculadas de la <strong>Options API</strong>.</p><p>En un tienda de opciones, el estado corresponde a los datos, las acciones a los m√©todos y los captadores a los computados.</p><h2 id="setup-stores" tabindex="-1">Setup Stores <a class="header-anchor" href="#setup-stores" aria-label="Permalink to &quot;Setup Stores&quot;">‚Äã</a></h2><blockquote><p>Entonces, las <strong>Options Stores</strong> se sienten similares a la forma de hacer las cosas de la <strong>Options API</strong>... pero ¬øeso significa que las <strong>Setup Stores</strong> se sienten similares a la forma de hacer las cosas de <strong>Composition API</strong>?</p></blockquote><p>¬°S√≠! Si ha estado usando la <strong>Composition API</strong> de Vue 3, una <strong>Setup Store</strong> le resultar√° mucho m√°s familiar.</p><p>En una <strong>Setup Store</strong>, el segundo par√°metro que pasamos a <code>defineStore</code> es una funci√≥n:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Setup Store</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">computed</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useTodoStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ToDoStore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todos</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#F07178;">([])</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">addTodo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">doneTodos</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">computed</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">todo</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">done</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">todos</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">addTodo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">doneTodos</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>Al igual que la funci√≥n <strong>setup</strong> en la <strong>Composition API</strong>, podemos crear un estado reactivo usando <code>refs</code> o <code>reactivo</code>. Nuestras acciones que pueden cambiar de estado se escribir√°n como funciones. Y podemos crear <code>getters</code> usando el ayudante <code>computed</code> de Vue.</p><blockquote><p>Cualquier propiedad de estado, funci√≥n o propiedad calculada debe devolverse en un objeto.</p></blockquote><p>Esto es similar a la forma en que funciona la funci√≥n <strong>setup</strong> en la <strong>Composition API</strong>, si est√° utilizando la sintaxis tradicional.</p><p>Muchas personas optan por utilizar una sintaxis abreviada denominada <strong>Script Setup API</strong> en sus archivos de componentes de Vue 3, y ver√° que se utiliza en el proyecto de ejemplo de este tutorial (el proyecto <strong>Pinia Restaurants</strong>).</p><p>Sin embargo, las tiendas de Pinia son archivos de JavaScript similares a los composables de Vue 3 y no pueden usar la sintaxis simplificada de <strong>script setup</strong>. Solo los archivos Vue pueden.</p><blockquote><p>Tenemos que usar la sintaxis <strong>setup</strong> tradicional, por lo que devolvemos propiedades y acciones de estado en el objeto devuelto si queremos que est√©n disponibles para otros archivos de Vue y las <strong>devtools</strong>.</p></blockquote><h2 id="¬øcual-usar-options-o-setup-store" tabindex="-1">¬øCu√°l usar: Options o Setup store? <a class="header-anchor" href="#¬øcual-usar-options-o-setup-store" aria-label="Permalink to &quot;¬øCu√°l usar: Options o Setup store?&quot;">‚Äã</a></h2><blockquote><p>En √∫ltima instancia, la elecci√≥n de utilizar una <strong>Options Store</strong> o una <strong>Setup Store</strong> depende de las preferencias y demandas de usted o de su equipo. Sin embargo, hay varias ventajas de usar una <strong>Setup Store</strong>.</p></blockquote><p>Las <strong>Setup Store</strong> nos permiten aprovechar la API de reactividad de Vue 3. Podemos usar composables, como funciones de composici√≥n de terceros de la biblioteca <a href="https://vueuse.org/" target="_blank" rel="noreferrer">VueUse</a>, y podemos usar <a href="https://vuejs.org/guide/essentials/watchers.html" target="_blank" rel="noreferrer">watchers</a>.</p><p>Veamos una caracter√≠stica de nuestra aplicaci√≥n de ejemplo, <strong>Pinia Restaurants</strong> , donde podemos usar un <code>watcher</code>.</p><p>Cuando el usuario carga la p√°gina, hay una entrada para escribir su ciudad.</p><p>Pero si el usuario no escribe nada, su ubicaci√≥n actual se encontrar√° autom√°ticamente. As√≠ que puedan usar la ubicaci√≥n que se carga para ellos, o pueden ingresar una nueva ubicaci√≥n.</p><p><img src="`+e+`" alt="options-vs-setup"></p><p>La funci√≥n que carga su ubicaci√≥n autom√°ticamente se basa en el componente <a href="https://vueuse.org/core/useGeolocation/" target="_blank" rel="noreferrer"><code>useGeolocation</code> de VueUse</a>.</p><p>Podemos traer ese composable a la tienda <code>geolocation</code> import√°ndola desde la biblioteca <strong>VueUse</strong>. Y luego debemos usar el composable dentro de la funci√≥n <code>setup</code> para que Vue pueda hacer su magia para realizar un seguimiento de los efectos de reactividad relacionados con este composable.</p><p><code>üìÑ src/stores/geolocation.js</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">watch</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinia</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useGeolocation</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@vueuse/core</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> useGeoLocationStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineStore</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">geolocation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useGeolocation</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// watch for coordinates to load or update, get a new location</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">watch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newValue</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">getLocation</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">longitude</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getLocation</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">longitude</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// fetch location data from Google Maps API</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">getLocation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">coords</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>La acci√≥n <code>getLocation</code> buscar√° una ubicaci√≥n mediante la API de <strong>Google Maps</strong>. Nos dar√° la ciudad si le enviamos coordenadas. Necesitaremos la latitud y la longitud del usuario para hacer esto, lo cual puede hacer por nosotros el composable <code>useGeolocation</code> de <strong>VueUse</strong>.</p><p>Sin embargo, dado que el composable <code>useGeolocation</code> debe solicitar permiso para obtener la ubicaci√≥n del usuario y hay un poco de retraso para que se carguen las coordenadas de la ubicaci√≥n, significa que no podemos activar la acci√≥n instant√°neamente cuando el componente se monta por primera vez. Necesitamos activarlo despu√©s de que se hayan cargado las coordenadas.</p><p>Aqu√≠ es donde entra en juego el <code>watcher</code>. Podemos observar el valor de las coordenadas y, cuando ese valor llegue, desencadenar la acci√≥n <code>getLocation</code>.</p><h2 id="no-es-un-factor-decisivo" tabindex="-1">No es un factor decisivo <a class="header-anchor" href="#no-es-un-factor-decisivo" aria-label="Permalink to &quot;No es un factor decisivo&quot;">‚Äã</a></h2><p>Si bien poder usar <code>watchers</code> es definitivamente una ventaja de las tiendas de <strong>Setup</strong>, no es un factor decisivo para las tiendas de <strong>Options</strong>. Hay formas de evitar tener que escribir este <code>watcher</code> en la tienda.</p><p>Por ejemplo, podr√≠amos usar el componente <code>useGeolocation</code> en un componente y ver los valores all√≠, luego desencadenar la acci√≥n en la tienda desde el componente.</p><p>Sin embargo, si se siente c√≥modo con la <strong>Composition API</strong> y un <code>watcher</code> es una buena opci√≥n para su soluci√≥n, entonces las tiendas de <strong>Setup</strong> son el camino a seguir. Pero si no usa la <strong>Composition API</strong> o si es relativamente nuevo en Pinia, es mejor que se quede con las tiendas de <strong>Options</strong>. Elija el tipo de tienda que le parezca adecuado para usted y sus casos de uso.</p><h2 id="a-continuacion-tiendas-modulares" tabindex="-1">A continuaci√≥n: Tiendas Modulares <a class="header-anchor" href="#a-continuacion-tiendas-modulares" aria-label="Permalink to &quot;A continuaci√≥n: Tiendas Modulares&quot;">‚Äã</a></h2><blockquote><p>En la pr√≥xima lecci√≥n, aprenderemos c√≥mo Pinia ayuda a mantener las aplicaciones m√°s organizadas con sus tiendas modulares. Es el primer paso para usar Pinia, dise√±ando una aplicaci√≥n que sea m√°s f√°cil de entender para los miembros del equipo debido a su organizaci√≥n en torno a √°reas de inter√©s separadas.</p></blockquote>`,45),t=[p];function r(c,i,y,d,D,F){return o(),a("div",null,t)}const C=s(l,[["render",r]]);export{A as __pageData,C as default};
